---
title: "Notes on R programming language"
output: 
  html_document:
    toc: true
---

### Set environment for the session
* `Sys.setlocale("LC_CTYPE", "russian")` is useful for handling texts in Russian
* `options(stringsAsFactors = F)`
* `options(error=recover)` is useful for debuging

### Editing text variable
* `sprintf("%s/%s/", path, cand)` returns "path/cand"

### Combinatorics
* `expand.grid()` creates a data frame from all combinations of the supplied vectors or factors

### Exploratory Graphs

* There are 3 graphics systems that cannot be generally mixed. 

#### Base plotting systems
##### Creating a plot
* `plot(x, y)` is a generic function, behaves differently depending on arguments
* `hist(data, breaks = 100)` produces histogram where `breaks` sets the number of bars
```{r}
library(datasets)
hist(airquality$Ozone, col = "skyblue", breaks = 20, main = "Histogram of ozone", xlab = "Ozone concentration")

```

* `lines()` adds lines to a plot
* `points()` adds points to a plot
```{r}
with(airquality, plot(Wind, Ozone))
with(subset(airquality, Month == 5), points(Wind, Ozone, col = "red"))

```

* `boxplot(data ~ categories, data = dataset, col = "red")`
* `abline()` can be used to plot **regression lines**, e.g.,
```{r}
model.wind <- lm(Ozone ~ Wind, airquality)
model.solar <- lm(Ozone ~ Solar.R, airquality)
par(mfrow = c(1, 2), oma = c(0, 0, 1, 0), mar = c(4, 4, 2, 1))
with(airquality, {
  plot(Wind, Ozone)
  abline(model.wind, col = "blue")
  plot(Solar.R, Ozone)
  abline(model.solar, col = "blue")
  mtext("Ozone and Solar Radiation in New York City", outer = T)
})

```

* `barplot(table(data), col = color, main = "Title of the graph")` is useful for plotting **categorical** data
* `par()` is used to set global graphical parameters, e.g.,
    + `pch` the ploting symbol
    + `lty` the line type 
    + `lwd` the libe width
    + `col` specifies the color (check `colors()` function)
    + `xlab` and `ylab` are character strings for the axises
    + `las` orientation of the axis labels
    + `bg` background color
    + `mar` margin size
    + `mfrow` specifies number of plots per row (plots are filled row-wise). Can be used for multiple base plots
    + `mfcol` specifies number of plots per column (plots are filled column-wise)

##### Annotating plot
* `text()` adds text labels inside the plot 
* `title()` adds annotations outside the plot
* `legend()` adds legend to the plot

#### Lattice system
```{r eval=FALSE}
library(lattice)

```
* good for plotting many plots on a screen
* most useful for conditioning type of plots
* plots are created with single function call
* `xyplot()`
* `bwplot()`

#### ggplot2 system
```{r eval=FALSE}
library(ggplot2)

```
* `qplot(displ, hwy, data = mpg)` is a basic plotting function, a convinient wrapper for `plot()`

#### Resources 
* [R Graph Gallery](http://rgraphgallery.blogspot.ru/)
* [R Bloggers](http://www.r-bloggers.com/)